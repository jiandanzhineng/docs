# 文档维护与多语言生成指南

本文档介绍如何修改本项目文档以及如何管理和生成多语言版本。

## 1. 如何修改文档

本项目的文档内容主要存储在 `docs/` 目录下。

### 1.1 文件位置
- **文档源文件**：`docs/` 目录。
- **博客文章**：`blog/` 目录。
- **页面**：`src/pages/` 目录。

### 1.2 修改步骤
1. 找到需要修改的 Markdown (`.md`) 或 MDX (`.mdx`) 文件。
2. 使用文本编辑器进行编辑。
3. 保存文件。

### 1.3 本地预览
在修改过程中，可以启动本地开发服务器实时预览更改：

```bash
npm run start
```

服务启动后，通常会在 `http://localhost:3000` 访问。

## 2. 如何生成多语言版本

本项目基于 Docusaurus 构建，支持国际化 (i18n)。

### 2.1 配置语言
在 `docusaurus.config.ts` 文件中，`i18n` 字段定义了支持的语言。

例如，添加中文支持：

```typescript
i18n: {
  defaultLocale: 'en',
  locales: ['en', 'zh-Hans'], // 添加 'zh-Hans'
},
```

### 2.2 翻译文档
翻译文件位于 `i18n/` 目录下。

1. **复制源文件**：
   将 `docs/` 下的源文件复制到对应的语言目录中。
   例如，要翻译中文文档，需将文件复制到：
   `i18n/zh-Hans/docusaurus-plugin-content-docs/current/`

   ```bash
   # 示例：复制 docs 目录到中文翻译目录
   cp -r docs/* i18n/zh-Hans/docusaurus-plugin-content-docs/current/
   ```

2. **进行翻译**：
   直接编辑 `i18n/zh-Hans/...` 目录下的 Markdown 文件，将其内容翻译为目标语言。

### 2.3 预览特定语言
本项目的开发服务器一次只会启动一个 locale（默认是 `zh-Hans`）。因此在开发模式下直接访问 `http://localhost:3000/en/...` 这类路径会出现 404，这是预期行为。

要预览特定语言（例如英文 `en`、中文 `zh-Hans`）的版本，请运行对应命令：

```bash
npm run start:en
# 或
npm run start:zh
```

### 2.4 构建多语言版本
构建生产环境版本时，Docusaurus 会为所有配置的语言生成静态文件。

```bash
npm run build
```

构建完成后，生成的静态文件位于 `build/` 目录中。
- 默认语言在根路径。
- 其他语言在对应的子路径下（例如 `build/zh-Hans/`）。

如果你希望在本地同时验证 `/en/...`、`/ja/...` 等多语言路径，请使用生产模式预览：

```bash
npm run preview
```

## 3. 常用命令速查

| 任务 | 命令 |
|------|------|
| 启动开发服务器 (默认语言) | `npm run start` |
| 启动开发服务器 (中文) | `npm run start:zh` |
| 启动开发服务器 (英文) | `npm run start:en` |
| 构建所有语言版本 | `npm run build` |
| 构建并本地预览 (支持所有语言路径) | `npm run preview` |
| 提取待翻译的 JSON 字符串 | `npm run write-translations` |
