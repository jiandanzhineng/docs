# エッジコントロール（寸止め）プレイ

気圧センサーに基づいた寸止めトレーニングゲームで、括約筋の圧力変化を検知し、偏心モーターコントローラーと電気刺激デバイスを組み合わせてインテリジェントな刺激制御を行います。

プレイキット購入リンク：

[https://item.taobao.com/item.htm?id=1017049175869](https://item.taobao.com/item.htm?id=1017049175869)

# スマホ版プレイチュートリアル： 
[https://www.bilibili.com/video/BV1xA1fBsErr/](https://www.bilibili.com/video/BV1xA1fBsErr/?share_source=copy_web&vd_source=3dd9ee8089c213072e87f2745c7050aa)

語雀のオリジナルチュートリアル：https://www.yuque.com/easysmart/easysmart/oe8gsvyhtflb9pqt

# PC版関連チュートリアル：
  
クライアントダウンロード：[新版PCクライアント使用ガイド](../（电脑版）控制客户端/新版电脑客户端使用指南.md)

動画チュートリアル：[【プレイチュートリアル】寸止めセット大公開：3ステップで頂上体験を、動画で攻略法を教えます_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1WXWpzUEoW/?spm_id_from=333.1007.top_right_bar_window_dynamic.content.click)

ホットスポットとデフォルトWi-Fiの使用を推奨します。この方式ではネットワーク設定は不要です。ルーター方式を使用する場合は、プレイ開始前にデバイスを**<font>ネットワーク設定</font>**してください。左側の目次のネットワーク設定セクションを参照してください~

# 注意事項
1. 膨張式アナルプラグは改良され、より密封性が高く、空気漏れが減少しています。以下の写真とは少し異なります。
2. プレイ時は気圧を**<font>高すぎない</font>**ようにしてください（空気漏れの原因になります）。一般的に22-24で十分で、締め付けた時に変化があればOKです。
3. 挿入時には少し気圧を入れると良いでしょう。柔らかすぎると入れにくい場合があります。

# キット組立（必読）
膨張式アナルプラグのポンプボールを外し、気圧センサーのゴムチューブに接続します。アナルプラグのゴムチューブは気圧センサーの三方弁に接続します~

1. アナルプラグを受け取った時の状態

![1762504366978-62ced3b2-0ddb-4add-83c4-4265b44de13a.jpeg](./img/gSDlRL7nWPTFLsZ5/1762504366978-62ced3b2-0ddb-4add-83c4-4265b44de13a-558371.jpeg)

2. ポンプボールを取り外す

![1762504385470-71f88bb4-ec46-45a7-b7da-9411e87b312d.jpeg](./img/gSDlRL7nWPTFLsZ5/1762504385470-71f88bb4-ec46-45a7-b7da-9411e87b312d-898307.jpeg)

3. 気圧センサーの両端に接続する

![1762504415342-4b3d0f6d-0973-4e29-aa96-7c9d99b47a94.jpeg](./img/gSDlRL7nWPTFLsZ5/1762504415342-4b3d0f6d-0973-4e29-aa96-7c9d99b47a94-303989.jpeg)

4. 完成品の状態

![1762504432568-291c04f6-6509-42d9-aaff-9fcde1eb30a6.jpeg](./img/gSDlRL7nWPTFLsZ5/1762504432568-291c04f6-6509-42d9-aaff-9fcde1eb30a6-900393.jpeg)

5. 圧力低下が速いと感じる場合のオプション強化

![1765109117287-4d6fb6c3-b357-4261-913e-a61a3f43393e.jpeg](./img/gSDlRL7nWPTFLsZ5/1765109117287-4d6fb6c3-b357-4261-913e-a61a3f43393e-938338.jpeg)![1765109125947-ae400a6d-e14c-4726-a31d-305a8ae034e0.jpeg](./img/gSDlRL7nWPTFLsZ5/1765109125947-ae400a6d-e14c-4726-a31d-305a8ae034e0-507329.jpeg)

このクランプを接続部でしっかり締め付けると、圧力低下速度を遅くできます。

クランプ購入先：[https://item.taobao.com/item.htm?id=724827233726](https://item.taobao.com/item.htm?id=724827233726) （11-13mm）

### ゲームメカニクス
1. **圧力モニタリング**：気圧センサーが括約筋の圧力変化をリアルタイムで検出
2. **インテリジェント調整**：圧力が高い時は刺激を弱め、低い時は刺激を強める
3. **電気刺激警告**：圧力が臨界値を超えると電気刺激を発動しユーザーを覚醒させる
4. **遅延開始**：圧力が低い時、一定時間遅延してからゆっくり刺激を開始
5. **動的バランス**：臨界圧力付近の平衡状態を維持

## 状態遷移図
![74a1eaac9cc38189b11547e1e5bff24c.svg](./img/gSDlRL7nWPTFLsZ5/74a1eaac9cc38189b11547e1e5bff24c-359440.svg)

## デバイス要件
### デバイス構成
| デバイス種類 | 論理ID | デバイス名 | 必須 | 役割 |
| --- | --- | --- | --- | --- |
| QIYA | pressure_sensor | 気圧センサー | はい | 括約筋の圧力変化を検出 |
| TD01 | motor_controller | 偏心モーターコントローラー | はい | 強度調整可能な刺激を提供 |
| DIANJI | shock_device | 電気刺激デバイス | いいえ | 圧力が高すぎる時の警告用電気刺激 |
| ZIDONGSUO | auto_lock | 自動ロックデバイス | いいえ | ゲーム開始時にロック、終了時にアンロック |


## ゲームパラメータ設定
### 基本パラメータ
| パラメータ名 | タイプ | 範囲 | デフォルト値 | 説明 |
| --- | --- | --- | --- | --- |
| duration | 数値 | 1-120分 | 20分 | ゲーム持続時間 |
| criticalPressure | 数値 | 0-40kPa | 20kPa | 臨界気圧値 |
| maxMotorIntensity | 数値 | 1-255 | 200 | TD01の最大強度 |


### 刺激制御パラメータ
| パラメータ名 | タイプ | 範囲 | デフォルト値 | 説明 |
| --- | --- | --- | --- | --- |
| lowPressureDelay | 数値 | 1-30秒 | 5秒 | 圧力が低い時の刺激遅延時間 |
| stimulationRampRateLimit | 数値 | 1-50 | 10 | 刺激強度上昇速度制限（1秒あたりの変化をこの値を超えない） |
| pressureSensitivity | 数値 | 0.1-5.0 | 1.0 | 圧力変化感度係数 |
| stimulationRampRandomPercent | 数値 | 0-100% | 0% | 刺激強度ランダム擾乱パーセンテージ |


### 電気刺激パラメータ
| パラメータ名 | タイプ | 範囲 | デフォルト値 | 説明 |
| --- | --- | --- | --- | --- |
| shockIntensity | 数値 | 10-100V | 20V | 電気刺激強度 |
| shockDuration | 数値 | 0.5-5秒 | 1秒 | 電気刺激持続時間 |


## アルゴリズムロジック
### 圧力-強度マッピングアルゴリズム
```plain
if (currentPressure >= criticalPressure) {
    motorIntensity = 0
    triggerShock()
} else if (currentPressure < criticalPressure) {
    pressureDiff = criticalPressure - currentPressure
    targetIntensity = (pressureDiff / criticalPressure) * maxMotorIntensity
    
    // 遅延開始メカニズム、刺激強度のグラデーション変化、刺激強度のランダム擾乱
}
```